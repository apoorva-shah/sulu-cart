define(["mvc/relationalmodel","mvc/hasmany","suluproduct/collections/variants","sulucategory/model/category"],function(a,b,c,d){"use strict";function e(a,b,c){return a+(void 0!==b?"/"+b:"")+"?locale="+c}var f=new a({urlRoot:"/admin/api/products",relations:[{type:b,key:"variants",relatedModel:function(){return f},collectionType:c,reverseRelation:{key:"parent"}},{type:b,key:"categories",relatedModel:d}],saveLocale:function(a,b){return b=_.defaults(b||{},{url:e(this.urlRoot,this.get("id"),a)}),this.save.call(this,null,b)},fetchLocale:function(a,b){b=_.defaults(b||{},{url:e(this.urlRoot,this.get("id"),a)});var c=this.fetch.call(this,b);return this.get("variants").setProductId(this.get("id")),c},defaults:function(){return{name:"",code:"",number:"",variants:[],categories:[]}}});return f});