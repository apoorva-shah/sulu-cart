define([],function(){"use strict";var a={instanceName:null,currencies:null,data:[],translations:{}},b={bulkPrice:function(a){return'<div id="bulk-price-'+a+'"><form id="prices-form"></form></div>'}},c="sulu.products.price-list.",d=function(a){return c+(this.options.instanceName?this.options.instanceName+".":"")+a},e=function(){return d.call(this,"initialized")},f=function(){this.sandbox.on("sulu.products.bulk-price.changed",function(){g.call(this)},this)},g=function(){var a,b,c=this.sandbox.dom.children(this.$el),d=[],e=[],f=$("#specialPrices");this.sandbox.util.foreach(c,function(c){a=this.sandbox.dom.data(c,"items"),b=$.data(c,"itemsSpecialPrice"),d.push.apply(d,a),e.push(b)}.bind(this)),this.sandbox.dom.data(this.$el,"prices",d),this.sandbox.dom.data(f,"prices",e)},h=function(a,b){var c=null,d=null;this.sandbox.util.foreach(b,function(b,c){return b.code===a?(d=c,!1):void 0}.bind(this)),d&&(c=b[0],b[0]=b[d],b[d]=c)};return{initialize:function(){this.options=this.sandbox.util.extend({},a,this.options),this.groupedPrices={},this.options.data.attributes.prices&&this.options.data.attributes.prices.length>0&&h.call(this,this.options.defaultCurrency,this.options.currencies),f.call(this),this.initializeBulkPriceComponents(),this.sandbox.emit(e.call(this))},initializeBulkPriceComponents:function(){var a=[];this.sandbox.util.foreach(this.options.currencies,function(c){var d=this.sandbox.dom.createElement(b.bulkPrice(c.code)),e={el:d,data:this.options.data,instanceName:c.code,currency:c};a.push({name:"bulk-price@suluproduct",options:e}),this.sandbox.dom.append(this.options.el,d)}.bind(this)),this.sandbox.start(a)}}});